<script>
  import { accessToken, userId, deviceId, player, trackName } from '@/js/store';
  import SpotifyApi from '@/js/SpotifyApi';

  let open = false;
</script>

<details {open}>
  <summary>Debug</summary>
  <ul>
    <li>ğŸ˜:{$userId}</li>
    <li>ğŸª™:{$accessToken?.substr(0, 8)}</li>
    <li>ğŸ“±deviceId:{$deviceId?.substr(0, 8)}</li>
    <li>ğŸ“»player:{$player?._options?.name}</li>
    <li>vol.:{$player?._options?.volume}</li>
    <li>ğŸµsong.:{$trackName}</li>
    <li>refresh frequency.:{import.meta.env.VITE_SPOTIFY_SYNC_FREQUENCY_MS}</li>
  </ul>

  <button on:click={SpotifyApi.forceSpotifyAuthorization}>ğŸ—‘ï¸ FORCE</button>
  <button on:click={() => SpotifyApi.synchronize()}>ğŸŸ¢ğŸŸ¢ğŸŸ¢sync</button>
  <button on:click={() => SpotifyApi.getPlaybackState()}>ğŸŸ¢playback-state</button>
  <button on:click={() => SpotifyApi.getAvailableDevice()}>ğŸŸ¢devices</button>
  <button on:click={() => SpotifyApi.transfertPlayback($deviceId)}> transfert-playback </button>
  <button on:click={() => SpotifyApi.me()}>me</button>
  <button on:click={() => SpotifyApi.getRecentlyPlayedSongs()}>recently-played-songs</button>
  <button on:click={() => SpotifyApi.determineLastSong()}>last-song</button>
  <button on:click={() => SpotifyApi.getQueue()}>queue</button>
  <button on:click={() => SpotifyApi.getQueueLastSong()}>last-queue</button>
  <button on:click={() => SpotifyApi.getMyPlaylists($userId)}>my-playlists</button>
  <button on:click={() => SpotifyApi.disconnect()}>disconnect</button>
</details>
